# ユーザーマニュアル

## ようこそ

Telegram SMS をご利用いただきありがとうございます。このマニュアルを読むことで、Telegram SMS ボットをゼロから構築する方法をより良く学ぶことができます。

## はじめに

Telegram SMS は、Android デバイスで実行される Telegram ボットです。サードパーティのリレー サーバーは必要ありませんが、ネットワークが `api.telegram.org` にアクセスできる必要があります。リモート コマンドを使用して、SMS、不在着信、バッテリー情報を管理できます。

## 1. 起動 - Telegram ボットの構築

* [@botfather](https://t.me/botfather) にアクセスし、`/newbot` と入力して新しいボットを取得します。

> Telegram SMS では、1 つの電話で実行できるボットは 1 つだけなので、1 つのボットを異なる電話に展開しないでください。そうしないと、エラーが発生する可能性があります。複数のボット アカウントをグループまたはチャネルに追加して、まとめて管理できます。

* 「新しいボットです。どのように呼び出しますか?」と表示されたら、ボットの名前を選択してください。` が表示されたら、ボットの表示名を入力します。

* 「よし。ボットのユーザー名を選択しましょう。ボットで終わる必要があります。たとえば、TetrisBot または tetris_bot.` のように、ボットのユーザー名を入力します。ボットのユーザー名は `bot` で終わる必要があることに注意してください。

* すると、以下に示すようにボット トークンと URL が届きます。

```
完了です。新しいボットの作成おめでとうございます。t.me/<ボットのユーザー名> で見つかります。これで、ボットの説明、概要セクション、プロフィール写真を追加できます。コマンドの一覧については、/help を参照してください。ところで、クールなボットの作成が完了したら、ボットのユーザー名を変更する場合は、ボット サポートに連絡してください。これを行う前に、ボットが完全に動作していることを確認してください。

HTTP API にアクセスするには、このトークンを使用します:
xxxxxxxx:xxxxxxxxxxxxxx
トークンを安全に保管してください。誰でもボットを制御するために使用できます。

ボット API の説明については、次のページを参照してください: https://core.telegram.org/bots/api
```

`xxxxxxxx:xxxxxxxxxxxxxx` はボットのトークンです。Telegram では、ボットのユーザー名でボットを見つけることができます。

## 2. 構成 - ボットが適切に応答するようにします

**t.me URL をクリックして、ボットを会話リストに追加して起動してください。ボットを起動するには、`/start` を複数送信できます。これは後で役立ちます。**

> Telegram SMS は、コマンドをリッスンするために Long Polling を使用するため、Webhook は必要ありません。ボットが以前に Webhook を設定していた場合は、`https://apt.telegram.org/bot<Your bot token>/setwebhook` にアクセスして、Webhook 設定をクリアしてください。

(前述のように `/start` を送信した場合は、この手順をスキップできます。)

* 受け取ったボット トークンをアプリの `ボット トークン` 列に入力します。

> https://config.telegram-sms.com にアクセスしてこのトークンの QR コードを生成し、Telegram SMS を使用してこの QR コードをスキャンしてトークンをすばやく入力できます。

> コンピューターで ADB を使用してデバッグできる場合は、ボット トークンの列に入力フォーカスを設定し、ターミナルで `adb shell input text <Your bot token>` と入力すると、列に入力しやすくなります。この方法には ADB が必要です。

* ボットをアクティブ化し、チャンネルまたはグループに追加します。ボットがグループに追加され、`ボット ユーザー名を含むコマンドにのみ応答する` がオンになっている場合は、`BotFather` の `プライバシー モード` を閉じて、構造化されたメッセージを受信できることを確認してください。

* ボットに任意のメッセージを送信します。

* 「最近のチャット ID を取得」をクリックし、メッセージを聞き、受信するために使用するアカウントを選択します。

* [オプション] SMS リモート コントロールに使用される信頼できる電話番号を入力します。この電話番号を使用して、SMS を送信したり、バックグラウンド サービスを再起動したりできます。

* 必要に応じて、次のオプションをオン/オフにします

>* ネットワーク エラーが発生したときに SMS を使用して再送信 - 送信に失敗したメッセージを信頼できる電話番号に送信します。

>* バッテリー レベルの変化を監視 - 充電状態が変化したり、バッテリー残量が少なくなると、メッセージを受信して​​通知されます。

>* 充電器の状態を監視 - 充電器の状態が変化すると、メッセージを送信して通知します。

>* チャット コマンドを取得 - チャット コマンドを使用してボットを管理します (これを無効にした場合は SMS 管理のみ)

>* 検証コードの自動抽出 - SMS から検証コードを自動的に抽出します (実験的な機能)。

>* デュアル カード モードで SIM カード エイリアスを表示 - SMS タイトルに SIM カード エイリアスを表示します。
>* ボットのユーザー名を含むコマンドにのみ応答 - ボットは、グループまたはチャネル内のボットのユーザー名を含むコマンドにのみ応答します。
>* DNS over HTTPS の使用 - 安全な暗号化 DNS サービス (Cloudflare® ベース) を使用します

* 「テストして保存」をクリックして、対応する権限を付与します。次の SMS を受信すると、構成は成功です:

```
[システム情報]
Telegram API サーバーに接続しました。
```

### 注意事項
* Telegram SMS では、アダプティブ バッテリーを禁止する必要があります。これにより、メッセージを迅速かつ安定して受信できます。プロキシ APP を使用している場合は、そのバッテリー使用も制限しないでください。

* MIUI などの OS を使用している場合は、設定でバッテリー制限を閉じ、システムからの起動を有効にしてください。サービス SMS を受信する必要がある場合は、対応する権限を付与してください。
# Руководство пользователя

## Добро пожаловать

Благодарим вас за использование Telegram SMS! Изучив это руководство, вы сможете научиться лучше настраивать бота Telegram SMS с самого начала.

## Введение

Telegram SMS - это Telegram бот, работающий на вашем устройстве Android, который не требует сторонних промежуточных серверов. Для его работы необходим только доступ к `api.telegram.org` через вашу текущую сеть. С помощью удаленных команд он позволяет удобно управлять вашими SMS-сообщениями, пропущенными звонками и уровнем заряда батареи.

## 1. Начало работы - Создание Telegram бота

* Посетите [@botfather](https://t.me/botfather) и введите `/newbot`, чтобы получить учетную запись бота.

> Telegram SMS работает по принципу "один телефон - один бот", поэтому не используйте одну учетную запись бота на нескольких телефонах. Вы можете добавить несколько ботов в группу или канал для централизованного управления.

* Когда вы увидите `Alright, a new bot. How are we going to call it? Please choose a name for your bot.`, введите отображаемое имя для вашего бота.

* Когда вы увидите `Good. Now let's choose a username for your bot. It must end in bot. Like this, for example: TetrisBot or tetris_bot.`, введите имя пользователя для вашего бота. Имя пользователя должно заканчиваться на `bot`.

* Затем вы получите токен бота и ссылку для добавления, как показано ниже:

```
Done! Congratulations on your new bot. You will find it at t.me/<имя_пользователя_вашего_бота>. You can now add a description, about section and profile picture for your bot, see /help for a list of commands. By the way, when you've finished creating your cool bot, ping our Bot Support if you want a better username for it. Just make sure the bot is fully operational before you do this.

Use this token to access the HTTP API:
xxxxxxxx:xxxxxxxxxxxxxx
Keep your token secure and store it safely, it can be used by anyone to control your bot.

For a description of the Bot API, see this page: https://core.telegram.org/bots/api
```

Где `xxxxxxxx:xxxxxxxxxxxxxx` - это токен вашего бота. Вы можете найти созданного бота по установленному имени пользователя.

## 2. Настройка - Настройка работы бота

* Введите полученный токен бота в поле токена бота.

> Вы можете использовать https://config.telegram-sms.com для создания QR-кода с токеном бота и быстро ввести его с помощью функции сканирования QR-кода.

* Активируйте бота и добавьте его в канал или группу. Если вы добавляете бота в группу и используете функцию "Отвечать только на команды с именем пользователя бота", отключите "Privacy mode" в `BotFather`, чтобы избежать проблем с обработкой некоторых сообщений.

* Отправьте несколько сообщений в целевой чат (содержание не имеет значения).

* Нажмите "Получить ID последних чатов" и выберите чат, который вы хотите отслеживать и получать сообщения.

* [Опционально] Введите доверенный номер телефона, который будет использоваться для удаленного управления через SMS. Вы можете использовать этот номер для удаленного управления отправкой SMS и перезапуска фоновой службы.

* Выберите дополнительные опции ниже:

>* Резервное SMS при ошибке сети - отправка через SMS на доверенный номер при сбое отправки сетевого сообщения.
>* Мониторинг состояния батареи - отправка сообщений при изменении состояния зарядки или низком заряде батареи.
>* Мониторинг состояния зарядного устройства - отправка сообщений при изменении состояния зарядного устройства.
>* Получать команды чата - управление ботом через команды чата (если отключено, управление только через SMS).
>* Автоматическое извлечение кодов - автоматическое распознавание кодов подтверждения в SMS (экспериментальная функция).
>* Показывать псевдоним SIM-карты - отображение псевдонима карты в заголовке сообщения.
>* Отвечать только на команды с именем пользователя бота - в группах и каналах реагировать только на команды, содержащие имя пользователя бота.
>* Использовать DNS over HTTPS - использование защищенного зашифрованного DNS-сервиса (на основе Cloudflare®).

* Нажмите "Тестировать и сохранить" и предоставьте необходимые разрешения. Когда вы получите следующее сообщение, настройка завершена:

```
[Системная информация]
Вы успешно подключились к серверу Telegram bot.
```

### Примечание
* Telegram SMS требует отключения оптимизации батареи для стабильной и быстрой работы. Если вы используете прокси-программу, также отключите для нее оптимизацию батареи.

* При использовании кастомных систем, таких как MIUI, отключите ограничения батареи в настройках и включите автозапуск при загрузке. Для получения уведомлений SMS включите разрешения для уведомлений SMS в настройках. [Подробнее здесь](https://telegram-sms.com/ru_ru/Q&A.html#%D1%8F-%D0%BC%D0%BE%D0%B3%D1%83-%D0%BF%D0%BE%D0%BB%D1%83%D1%87%D0%B0%D1%82%D1%8C-%D0%BE%D0%B1%D1%8B%D1%87%D0%BD%D1%8B%D0%B5-sms-%D0%BD%D0%BE-%D0%BD%D0%B5-%D0%BC%D0%BE%D0%B3%D1%83-%D0%BF%D0%BE%D0%BB%D1%83%D1%87%D0%B0%D1%82%D1%8C-sms-%D1%81-%D0%BA%D0%BE%D0%B4%D0%B0%D0%BC%D0%B8-%D0%BF%D0%BE%D0%B4%D1%82%D0%B2%D0%B5%D1%80%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D1%8F)

* При использовании EMUI фоновый процесс Telegram SMS не может нормально работать из-за особенностей системного управления фоновыми процессами.

* Если ваша система не получает уведомления SMS должным образом, это связано с системными ограничениями. Попробуйте установить это приложение как приложение SMS по умолчанию.

## 3. SMS - Управление ботом с доверенного телефона

Вы можете указать доверенный номер телефона для автоматической пересылки. Бот будет автоматически пересылать сообщения, полученные с этого номера, в следующем формате:

```
/sendsms
{номер получателя}
{текст сообщения}
```

Пример:

```
/sendsms
10086
cxll
```

Это отправит SMS с текстом `cxll` на номер `10086`.

Вы можете перезапустить все фоновые процессы, отправив команду `/restart-service` с доверенного телефона.

Вы можете использовать `/sendussd` для отправки USSD-запросов в следующем формате:

```
/sendussd
{USSD код}
```

**Если вы находитесь не в текущем регионе, добавьте код страны/региона (например, международный код для материкового Китая: +86).**

## 4. Команды - Управление ботом через команды чата

Вы можете получить список доступных команд, отправив команду `/start`.

### Отправка SMS

Формат отправки SMS через команды такой же, как при отправке через SMS. Вы также можете просто отправить `/sendsms` для интерактивной отправки SMS.

Использование `/sendsms` отправит SMS через SIM-карту по умолчанию. При использовании нескольких SIM-карт используйте `/sendsms1` для отправки через первую SIM-карту и `/sendsms2` через вторую SIM-карту (если доступна).

### Ответ на SMS

Вы можете использовать функцию ответа Telegram для быстрого ответа на полученные SMS и пропущенные звонки.

Когда разрешения на телефонные звонки не предоставлены, вы можете использовать только SIM-карту по умолчанию для отправки SMS.

### Отправка USSD-запросов

Вы можете использовать `/sendussd` для отправки USSD-запросов в следующем формате:

```
/sendussd {USSD код}
```

### Управление несколькими ботами в группе

Если вы используете бота в группе или канале и включили опцию "Отвечать только на команды с именем пользователя бота", бот будет реагировать только на команды в формате `/<команда>@<имя_пользователя_бота>`. Используя эту функцию, вы можете управлять несколькими ботами в группе или канале.

## 5. Информация об авторских правах

- Telegram® является зарегистрированной торговой маркой Telegram Messenger LLP.

- Cloudflare® является зарегистрированной торговой маркой Cloudflare, Inc.

- MIUI® является зарегистрированной торговой маркой Xiaomi Technology Co., Ltd.
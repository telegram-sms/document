# Руководство по разработке

**Этот документ предназначен для разработчиков, чтобы компилировать исходный код. Если вы не понимаете содержание документации или столкнулись с ошибкой, обязательно используйте Google Поиск.**

## Как структурирован рабочий процесс git в Telegram SMS?

git позволяет гибко настраивать рабочий процесс, поэтому важно четко определить рабочий процесс этого сообщества, чтобы люди знали, чего ожидать. Рабочий процесс git, используемый в приложении Telegram SMS, относительно прост и основан на очень распространенном рабочем процессе, установленном github.com, gitlab.com и другими подобными. Вот его разбор:

- код отправляется для включения через запросы на слияние (MRs)
- Ветку master нельзя сливать с любой веткой, которая не была протестирована на реальной машине
- Запросы на слияние для стабильной ветки могут включать коммиты из master
- Пакет компиляции, предоставляемый общественности, может быть скомпилирован с использованием конвейера github.

## Как скомпилировать проект

#### 1. загрузите последний исходный код
```
git clone https://github.com/telegram-sms/telegram-sms.git telegram-sms
cd telegram-sms
git submodule update --init --recursive
```

#### 2. настройте среду компиляции

Вы можете скомпилировать этот проект, ссылаясь на скрипт компиляции, показанный в [android.yml](https://github.com/telegram-sms/telegram-sms/blob/master/.github/workflows/android.yml)

Настройте переменные среды, обязательно измените `ANDROID_HOME` на ваш каталог `Android SDK`

```
export ANDROID_HOME=<Android SDK>
export KEYSTORE_PASSWORD=<Ваш пароль>
export ALIAS_PASSWORD=<Ваш пароль>
export ALIAS_NAME=<Ваше имя псевдонима>
export VERSION_CODE=1
export VERSION_NAME="Debug"
./gradlew app:copy_language_pack
```

#### 3. запустите компиляцию
```
./gradlew assembleDebug
```

Или используйте следующую команду для создания версии `release`

```
./gradlew assembleRelease
```